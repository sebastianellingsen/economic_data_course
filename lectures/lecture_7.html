<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Economic Data - Lecture 7</title>
    <meta charset="utf-8" />
    <meta name="author" content="School of Economics - University of Bristol" />
    <meta name="date" content="2024-11-03" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Economic Data - Lecture 7
]
.subtitle[
## Sebastian Ellingsen
]
.author[
### School of Economics - University of Bristol
]
.date[
### 2024-11-03
]

---





&lt;style type="text/css"&gt;
.remark-code{line-height: 1.5; font-size: 80%}

@media print {
  .has-continuation {
    display: block;
  }
}

code.r.hljs.remark-code{
  position: relative;
  overflow-x: hidden;
}


code.r.hljs.remark-code:hover{
  overflow-x:visible;
  width: 500px;
  border-style: solid;
}
&lt;/style&gt;







## After this lecture you should be able to

&lt;br&gt;&lt;br&gt;

1. Explain how labour market statistics are calculated.

2. Explain the difference between register and survey data.

3. Explain the intuition behind seasonal adjustment. 


&lt;!-- froim pop to labor market, some def of labor market, then the data sources, then seasnoall adjustment  --&gt;



---
class: inverse, center, middle

# Data About the Labor Market


---



&lt;img src="lecture_7_files/figure-html/unnamed-chunk-3-1.png" width="792" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/HISTPOP_27102023144550354.csv" target="_blank"&gt;here&lt;/a&gt;.


---

## From population data to the labour market

&lt;br&gt;&lt;br&gt;

We can divide the total population into groups according to their economic activity. 

For economic analyses, it is often useful to split the population into three groups by their age.

- Children (UK definition: Aged below 16).

- Elderly (UK definition: Aged above 64).

- Working age population (UK definition: everyone else).





---





&lt;img src="lecture_7_files/figure-html/unnamed-chunk-5-1.png" width="792" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/demo_pjan__custom_13578827_linear.csv" target="_blank"&gt;here&lt;/a&gt;.



---

## The labour force

&lt;br&gt;&lt;br&gt;

Within the working-age population, we can further split the population into two groups.

Out of the labour force:

- Students, long-term sick, looking after family/staying home, retired, other.

In the labour force:

- People who are unemployed, people who are employed (including self-employed). &lt;br&gt;&lt;br&gt;


We will now take a closer look at the labour force by defining the categories within the labour force.


&lt;!-- from pop to labor market, some measures to summarise the labor market, seasonal adjustment  --&gt;








&lt;!-- --- --&gt;
&lt;!-- ## Out of the labour force --&gt;

&lt;!-- Also known as: The economic inactive --&gt;

&lt;!-- - Studying (≈ 27% in the UK) --&gt;

&lt;!-- - Looking after the family/staying home (≈ 24% in the UK)  --&gt;

&lt;!-- - Long-term sick (≈ 23% in the UK) --&gt;

&lt;!-- - Retired (≈ 13% in the UK) --&gt;






---

## Definitions of the labour force

*Unemployed* (ILO definition):

- Without a job, have been actively seeking work in the past four weeks and are available to start work in the next two weeks.

- Out of work, have found a job and are waiting to start it in the next two weeks.&lt;br&gt;&lt;br&gt;

*Employed* (ILO definition):

- Work at least one hour for pay in a week.

- Temporarily away from jobs.

- On Government-supported training/employment programs.

- Unpaid family work.








---
class: inverse, center, middle

`$$\Large \text{Labour force} = \text{Unemployed} + \text{Employed}$$`




---
class: inverse, center, middle

`$$\Large \text{Employment rate} =  \frac{\text{Employed}}{\text{Unemployed} + \text{Employed}}$$`



---




&lt;img src="lecture_7_files/figure-html/unnamed-chunk-7-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/lfsq_ergan__custom_13595067_linear.csv" target="_blank"&gt;here&lt;/a&gt;.





---
class: inverse, center, middle

`$$\Large \text{Unemployment rate} = \frac{\text{Unemployed}}{\text{Unemployed} + \text{Employed}}$$`


---




&lt;img src="lecture_7_files/figure-html/unnamed-chunk-9-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/AURUKM.csv" target="_blank"&gt;here&lt;/a&gt;.






---




&lt;img src="lecture_7_files/figure-html/unnamed-chunk-11-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/STLABOUR_10112023115611842.csv" target="_blank"&gt;here&lt;/a&gt;.


---
class: inverse, center, middle

`$$\Large \text{Inactivity rate} =  \frac{\text{Economically inactive persons}}{\text{Total population of the same age group}}$$`






---

## Labour demand

The measures described above capture both labour supply and demand. 

As for employment, we have survey and register-based measures. 

- Register: Data from public employment services we can use the number of announced job vacancies.

- Survey: Ask firms about their labour demand needs. 

Register-based measures are cheaper, but not all firms post their vacancies in the public employment service.

For surveys, not every firm responds and maybe the firms that respond are not representative.

As a result, these can differ substantially. 


&lt;!-- survey based, less standardized --&gt;

&lt;!-- eurostat defintion --&gt;







---
class: inverse, center, middle

`$$\Large \text{JVR} =  \frac{\text{Number of vacancies}}{\text{Number of vacancies + Number of occupied posts}}$$`



---




&lt;img src="lecture_7_files/figure-html/unnamed-chunk-13-1.png" width="792" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/jvs_a_rate_r2__custom_13589779_linear.csv" target="_blank"&gt;here&lt;/a&gt;.




---
## Where the data comes from

Labour Force Surveys (standardised surveys across the world)

- Ask a random subset of the population about their labour market status

- Often done monthly – but reported quarterly

- Advantage: complies with ILO definition: comparable across time and countries.&lt;br&gt;&lt;br&gt;

Administrative data

- Unemployed `\(\approx\)` number of unemployment benefit claimants.

- Advantage: cheap and precise.

**Note**: Age definition for the working age population can vary! ONS (UK): 16-64y, Eurostat: 15-74y, US: Age 15y and over





---




&lt;img src="lecture_7_files/figure-html/unnamed-chunk-15-1.png" width="792" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/Figure_6__Claimant_Count_has_increased_since_March_2020.csv" target="_blank"&gt;here&lt;/a&gt;.

---


&lt;div style="text-align: center; margin-top: 50px;"&gt;
  &lt;img src="images/data_article.png" alt="A descriptive alt text" style="width: 500px;"&gt;
&lt;/div&gt;

From *The Financial Times*, Nov. 1. You can find the article &lt;a href="https://www.ft.com/content/4978a9f8-e2d5-4a9d-80e7-02b0ba2bd56c" target="_blank"&gt;here&lt;/a&gt;













---
class: inverse, center, middle

# Seasonal Adjustment







---


## Seasonal variation 

Labor market data has a substantial seasonal component.

- Night: fewer people work, travel etc.

- Weekends: fewer people work, and commute, more people in museums and at the beach.

- August: fewer people work, more travel.

- December: private consumption is higher in UK.&lt;br&gt;&lt;br&gt;

This is an issue if we want to compare changes between periods. 

- Unemployment is always lower in December, does that mean "the economy" is doing better?

- We might want to understand if unemployment is lower *over and beyond* what we can expect from seasonal variation or the trend. 





---





&lt;img src="lecture_7_files/figure-html/unnamed-chunk-17-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/STLABOUR_10112023115611842.csv" target="_blank"&gt;here&lt;/a&gt;.




---





&lt;img src="lecture_7_files/figure-html/unnamed-chunk-19-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/STLABOUR_10112023115611842.csv" target="_blank"&gt;here&lt;/a&gt;.



---



&lt;img src="lecture_7_files/figure-html/unnamed-chunk-21-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/STLABOUR_10112023115611842.csv" target="_blank"&gt;here&lt;/a&gt;.



---



&lt;img src="lecture_7_files/figure-html/unnamed-chunk-23-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/STLABOUR_10112023115611842.csv" target="_blank"&gt;here&lt;/a&gt;.




---
## Decomposing a time series


We can decompose the variation in the unemployment rate `\(u_t\)` as follows.

`$$u_t = s_t+\lambda_t +\varepsilon_t$$`
- `\(\lambda_t\)` is a trend component.

- `\(s_t\)` is a seasonal compononent. 

- `\(\varepsilon_t\)` are random shocks.&lt;br&gt;&lt;br&gt;

Some statistical agencies provide data where the different components have been isolated.

There is a wide variety of ways to decompose a time series and the correct method depends on the series and application.

Let's create our own decomposition to get a sense of how it works. 



---

## Finding the trend component

One way to remove seasonality and other shocks is through the use of a linear filter. 

One such filter is the moving average or MA filter.

The MA filter of order k or `\(MA(k)\)` is given by

`$$\lambda_t = \frac{1}{2k + 1}\sum_{t-k}^{t+k}y_t$$`

A moving average is commonly used with time series data to smooth out short-term fluctuations and highlight longer-term trends.

Let's try this with our unemployment data.



---




count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
*library(tidyverse)
```
]
 
.panel2-chunk_1-auto[

]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
*library(lubridate)
```
]
 
.panel2-chunk_1-auto[

]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
*read_csv('../data/STLABOUR_10112023115611842.csv')
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 19
   LOCATION Country    SUBJECT Subject MEASURE Measure FREQUENCY Frequency TIME 
   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;
 1 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 2 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 3 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 4 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 5 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 6 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 7 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 8 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
 9 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
10 GBR      United Ki… LRHUTT… Unempl… ST      Level,… M         Monthly   2000…
# ℹ 554 more rows
# ℹ 10 more variables: Time &lt;chr&gt;, `Unit Code` &lt;chr&gt;, Unit &lt;chr&gt;,
#   `PowerCode Code` &lt;dbl&gt;, PowerCode &lt;chr&gt;, `Reference Period Code` &lt;lgl&gt;,
#   `Reference Period` &lt;lgl&gt;, Value &lt;dbl&gt;, `Flag Codes` &lt;lgl&gt;, Flags &lt;lgl&gt;
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
* select(TIME, Measure, Value)
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 3
   TIME    Measure                        Value
   &lt;chr&gt;   &lt;chr&gt;                          &lt;dbl&gt;
 1 2000-01 Level, rate or quantity series   5.7
 2 2000-02 Level, rate or quantity series   5.8
 3 2000-03 Level, rate or quantity series   5.7
 4 2000-04 Level, rate or quantity series   5.5
 5 2000-05 Level, rate or quantity series   5.4
 6 2000-06 Level, rate or quantity series   5.3
 7 2000-07 Level, rate or quantity series   5.5
 8 2000-08 Level, rate or quantity series   5.5
 9 2000-09 Level, rate or quantity series   5.5
10 2000-10 Level, rate or quantity series   5.3
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
* rename(date  = TIME)
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 3
   date    Measure                        Value
   &lt;chr&gt;   &lt;chr&gt;                          &lt;dbl&gt;
 1 2000-01 Level, rate or quantity series   5.7
 2 2000-02 Level, rate or quantity series   5.8
 3 2000-03 Level, rate or quantity series   5.7
 4 2000-04 Level, rate or quantity series   5.5
 5 2000-05 Level, rate or quantity series   5.4
 6 2000-06 Level, rate or quantity series   5.3
 7 2000-07 Level, rate or quantity series   5.5
 8 2000-08 Level, rate or quantity series   5.5
 9 2000-09 Level, rate or quantity series   5.5
10 2000-10 Level, rate or quantity series   5.3
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
* rename(adj   = Measure)
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 3
   date    adj                            Value
   &lt;chr&gt;   &lt;chr&gt;                          &lt;dbl&gt;
 1 2000-01 Level, rate or quantity series   5.7
 2 2000-02 Level, rate or quantity series   5.8
 3 2000-03 Level, rate or quantity series   5.7
 4 2000-04 Level, rate or quantity series   5.5
 5 2000-05 Level, rate or quantity series   5.4
 6 2000-06 Level, rate or quantity series   5.3
 7 2000-07 Level, rate or quantity series   5.5
 8 2000-08 Level, rate or quantity series   5.5
 9 2000-09 Level, rate or quantity series   5.5
10 2000-10 Level, rate or quantity series   5.3
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
* rename(unemp = Value)
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 3
   date    adj                            unemp
   &lt;chr&gt;   &lt;chr&gt;                          &lt;dbl&gt;
 1 2000-01 Level, rate or quantity series   5.7
 2 2000-02 Level, rate or quantity series   5.8
 3 2000-03 Level, rate or quantity series   5.7
 4 2000-04 Level, rate or quantity series   5.5
 5 2000-05 Level, rate or quantity series   5.4
 6 2000-06 Level, rate or quantity series   5.3
 7 2000-07 Level, rate or quantity series   5.5
 8 2000-08 Level, rate or quantity series   5.5
 9 2000-09 Level, rate or quantity series   5.5
10 2000-10 Level, rate or quantity series   5.3
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
  rename(unemp = Value) %&gt;%
* mutate(adj  = ifelse(adj == 'Level, rate or quantity series', 'No seasonal adjustment', 'Seasonal adjustment'))
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 3
   date    adj                    unemp
   &lt;chr&gt;   &lt;chr&gt;                  &lt;dbl&gt;
 1 2000-01 No seasonal adjustment   5.7
 2 2000-02 No seasonal adjustment   5.8
 3 2000-03 No seasonal adjustment   5.7
 4 2000-04 No seasonal adjustment   5.5
 5 2000-05 No seasonal adjustment   5.4
 6 2000-06 No seasonal adjustment   5.3
 7 2000-07 No seasonal adjustment   5.5
 8 2000-08 No seasonal adjustment   5.5
 9 2000-09 No seasonal adjustment   5.5
10 2000-10 No seasonal adjustment   5.3
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
  rename(unemp = Value) %&gt;%
  mutate(adj  = ifelse(adj == 'Level, rate or quantity series', 'No seasonal adjustment', 'Seasonal adjustment')) %&gt;%
* mutate(date = paste(date, "01", sep="-"))
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 3
   date       adj                    unemp
   &lt;chr&gt;      &lt;chr&gt;                  &lt;dbl&gt;
 1 2000-01-01 No seasonal adjustment   5.7
 2 2000-02-01 No seasonal adjustment   5.8
 3 2000-03-01 No seasonal adjustment   5.7
 4 2000-04-01 No seasonal adjustment   5.5
 5 2000-05-01 No seasonal adjustment   5.4
 6 2000-06-01 No seasonal adjustment   5.3
 7 2000-07-01 No seasonal adjustment   5.5
 8 2000-08-01 No seasonal adjustment   5.5
 9 2000-09-01 No seasonal adjustment   5.5
10 2000-10-01 No seasonal adjustment   5.3
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
  rename(unemp = Value) %&gt;%
  mutate(adj  = ifelse(adj == 'Level, rate or quantity series', 'No seasonal adjustment', 'Seasonal adjustment')) %&gt;%
  mutate(date = paste(date, "01", sep="-")) %&gt;%
* mutate(date = as.Date(date, format = "%Y-%m-%d"))
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 3
   date       adj                    unemp
   &lt;date&gt;     &lt;chr&gt;                  &lt;dbl&gt;
 1 2000-01-01 No seasonal adjustment   5.7
 2 2000-02-01 No seasonal adjustment   5.8
 3 2000-03-01 No seasonal adjustment   5.7
 4 2000-04-01 No seasonal adjustment   5.5
 5 2000-05-01 No seasonal adjustment   5.4
 6 2000-06-01 No seasonal adjustment   5.3
 7 2000-07-01 No seasonal adjustment   5.5
 8 2000-08-01 No seasonal adjustment   5.5
 9 2000-09-01 No seasonal adjustment   5.5
10 2000-10-01 No seasonal adjustment   5.3
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
  rename(unemp = Value) %&gt;%
  mutate(adj  = ifelse(adj == 'Level, rate or quantity series', 'No seasonal adjustment', 'Seasonal adjustment')) %&gt;%
  mutate(date = paste(date, "01", sep="-")) %&gt;%
  mutate(date = as.Date(date, format = "%Y-%m-%d")) %&gt;%
* mutate(month = month(date), year = year(date))
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 564 × 5
   date       adj                    unemp month  year
   &lt;date&gt;     &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 2000-01-01 No seasonal adjustment   5.7     1  2000
 2 2000-02-01 No seasonal adjustment   5.8     2  2000
 3 2000-03-01 No seasonal adjustment   5.7     3  2000
 4 2000-04-01 No seasonal adjustment   5.5     4  2000
 5 2000-05-01 No seasonal adjustment   5.4     5  2000
 6 2000-06-01 No seasonal adjustment   5.3     6  2000
 7 2000-07-01 No seasonal adjustment   5.5     7  2000
 8 2000-08-01 No seasonal adjustment   5.5     8  2000
 9 2000-09-01 No seasonal adjustment   5.5     9  2000
10 2000-10-01 No seasonal adjustment   5.3    10  2000
# ℹ 554 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
  rename(unemp = Value) %&gt;%
  mutate(adj  = ifelse(adj == 'Level, rate or quantity series', 'No seasonal adjustment', 'Seasonal adjustment')) %&gt;%
  mutate(date = paste(date, "01", sep="-")) %&gt;%
  mutate(date = as.Date(date, format = "%Y-%m-%d")) %&gt;%
  mutate(month = month(date), year = year(date)) %&gt;%
* filter(adj == 'No seasonal adjustment')
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 282 × 5
   date       adj                    unemp month  year
   &lt;date&gt;     &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 2000-01-01 No seasonal adjustment   5.7     1  2000
 2 2000-02-01 No seasonal adjustment   5.8     2  2000
 3 2000-03-01 No seasonal adjustment   5.7     3  2000
 4 2000-04-01 No seasonal adjustment   5.5     4  2000
 5 2000-05-01 No seasonal adjustment   5.4     5  2000
 6 2000-06-01 No seasonal adjustment   5.3     6  2000
 7 2000-07-01 No seasonal adjustment   5.5     7  2000
 8 2000-08-01 No seasonal adjustment   5.5     8  2000
 9 2000-09-01 No seasonal adjustment   5.5     9  2000
10 2000-10-01 No seasonal adjustment   5.3    10  2000
# ℹ 272 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
  rename(unemp = Value) %&gt;%
  mutate(adj  = ifelse(adj == 'Level, rate or quantity series', 'No seasonal adjustment', 'Seasonal adjustment')) %&gt;%
  mutate(date = paste(date, "01", sep="-")) %&gt;%
  mutate(date = as.Date(date, format = "%Y-%m-%d")) %&gt;%
  mutate(month = month(date), year = year(date)) %&gt;%
  filter(adj == 'No seasonal adjustment') %&gt;%
* mutate(trend = (lag(unemp, n=4)   + lag(unemp, n=3)   + lag(unemp, n=2)  + lag(unemp, n=1)  +
*                 lead(unemp, n=4)  + lead(unemp, n=3)  + lead(unemp, n=2) + lead(unemp, n=1) +
*                 unemp)/9)
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 282 × 6
   date       adj                    unemp month  year trend
   &lt;date&gt;     &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 2000-01-01 No seasonal adjustment   5.7     1  2000 NA   
 2 2000-02-01 No seasonal adjustment   5.8     2  2000 NA   
 3 2000-03-01 No seasonal adjustment   5.7     3  2000 NA   
 4 2000-04-01 No seasonal adjustment   5.5     4  2000 NA   
 5 2000-05-01 No seasonal adjustment   5.4     5  2000  5.54
 6 2000-06-01 No seasonal adjustment   5.3     6  2000  5.5 
 7 2000-07-01 No seasonal adjustment   5.5     7  2000  5.42
 8 2000-08-01 No seasonal adjustment   5.5     8  2000  5.34
 9 2000-09-01 No seasonal adjustment   5.5     9  2000  5.3 
10 2000-10-01 No seasonal adjustment   5.3    10  2000  5.27
# ℹ 272 more rows
```
]

---
count: false
 

.panel1-chunk_1-auto[

``` r
# Loading packages
library(tidyverse)
library(lubridate)

# Loading and cleaning the data
read_csv('../data/STLABOUR_10112023115611842.csv') %&gt;%
  select(TIME, Measure, Value) %&gt;%
  rename(date  = TIME) %&gt;%
  rename(adj   = Measure) %&gt;%
  rename(unemp = Value) %&gt;%
  mutate(adj  = ifelse(adj == 'Level, rate or quantity series', 'No seasonal adjustment', 'Seasonal adjustment')) %&gt;%
  mutate(date = paste(date, "01", sep="-")) %&gt;%
  mutate(date = as.Date(date, format = "%Y-%m-%d")) %&gt;%
  mutate(month = month(date), year = year(date)) %&gt;%
  filter(adj == 'No seasonal adjustment') %&gt;%
  mutate(trend = (lag(unemp, n=4)   + lag(unemp, n=3)   + lag(unemp, n=2)  + lag(unemp, n=1)  +
                  lead(unemp, n=4)  + lead(unemp, n=3)  + lead(unemp, n=2) + lead(unemp, n=1) +
                  unemp)/9)
```
]
 
.panel2-chunk_1-auto[

```
# A tibble: 282 × 6
   date       adj                    unemp month  year trend
   &lt;date&gt;     &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 2000-01-01 No seasonal adjustment   5.7     1  2000 NA   
 2 2000-02-01 No seasonal adjustment   5.8     2  2000 NA   
 3 2000-03-01 No seasonal adjustment   5.7     3  2000 NA   
 4 2000-04-01 No seasonal adjustment   5.5     4  2000 NA   
 5 2000-05-01 No seasonal adjustment   5.4     5  2000  5.54
 6 2000-06-01 No seasonal adjustment   5.3     6  2000  5.5 
 7 2000-07-01 No seasonal adjustment   5.5     7  2000  5.42
 8 2000-08-01 No seasonal adjustment   5.5     8  2000  5.34
 9 2000-09-01 No seasonal adjustment   5.5     9  2000  5.3 
10 2000-10-01 No seasonal adjustment   5.3    10  2000  5.27
# ℹ 272 more rows
```
]

&lt;style&gt;
.panel1-chunk_1-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_1-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_1-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





---


count: false
 

.panel1-chunk_2-auto[

``` r
# Plotting the data
*ggplot(data = df, aes(x = date, y = trend))
```
]
 
.panel2-chunk_2-auto[
&lt;img src="lecture_7_files/figure-html/chunk_2_auto_01_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_2-auto[

``` r
# Plotting the data
ggplot(data = df, aes(x = date, y = trend))+
* geom_line(stat='identity', lwd = 1)
```
]
 
.panel2-chunk_2-auto[
&lt;img src="lecture_7_files/figure-html/chunk_2_auto_02_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_2-auto[

``` r
# Plotting the data
ggplot(data = df, aes(x = date, y = trend))+
  geom_line(stat='identity', lwd = 1)+
*   scale_x_date(date_breaks = "4 month", date_labels = "%m-%Y")
```
]
 
.panel2-chunk_2-auto[
&lt;img src="lecture_7_files/figure-html/chunk_2_auto_03_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_2-auto[

``` r
# Plotting the data
ggplot(data = df, aes(x = date, y = trend))+
  geom_line(stat='identity', lwd = 1)+
    scale_x_date(date_breaks = "4 month", date_labels = "%m-%Y")+
* xlab("")
```
]
 
.panel2-chunk_2-auto[
&lt;img src="lecture_7_files/figure-html/chunk_2_auto_04_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_2-auto[

``` r
# Plotting the data
ggplot(data = df, aes(x = date, y = trend))+
  geom_line(stat='identity', lwd = 1)+
    scale_x_date(date_breaks = "4 month", date_labels = "%m-%Y")+
  xlab("") +
* ylab("Unemp. rate (%)")
```
]
 
.panel2-chunk_2-auto[
&lt;img src="lecture_7_files/figure-html/chunk_2_auto_05_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_2-auto[

``` r
# Plotting the data
ggplot(data = df, aes(x = date, y = trend))+
  geom_line(stat='identity', lwd = 1)+
    scale_x_date(date_breaks = "4 month", date_labels = "%m-%Y")+
  xlab("") +
  ylab("Unemp. rate (%)") +
* labs(title = "Trend component",
*      caption = "")
```
]
 
.panel2-chunk_2-auto[
&lt;img src="lecture_7_files/figure-html/chunk_2_auto_06_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_2-auto[

``` r
# Plotting the data
ggplot(data = df, aes(x = date, y = trend))+
  geom_line(stat='identity', lwd = 1)+
    scale_x_date(date_breaks = "4 month", date_labels = "%m-%Y")+
  xlab("") +
  ylab("Unemp. rate (%)") +
  labs(title = "Trend component",
       caption = "")+
* theme(plot.title = element_text(size=22),
*       plot.subtitle = element_text(size=16),
*       legend.title = element_blank(),
*       legend.text=element_text(size=14),
*       legend.position="bottom",
*       plot.caption = element_text(size=12, hjust = 0),
*       axis.title = element_text(size = 18),
*       strip.background = element_blank(),
*       axis.text.x=element_text(angle=45, hjust=1, size = 12),
*       axis.text.y=element_text(size = 12),
*       strip.placement = "outside",
*       panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
*       panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
*       panel.background = element_rect(fill = "transparent", colour = NA),
*       plot.background  = element_rect(fill = "transparent", colour = NA),
*       legend.background = element_rect(fill='transparent'),
*       legend.key=element_blank())
```
]
 
.panel2-chunk_2-auto[
&lt;img src="lecture_7_files/figure-html/chunk_2_auto_07_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.panel1-chunk_2-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_2-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_2-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;










---



&lt;img src="lecture_7_files/figure-html/unnamed-chunk-26-1.png" width="1008" style="display: block; margin: auto;" /&gt;



---

## Finding the seasonal component

To extract the seasonal component, we can average over each month. 

The part of the unemployment not explained by the trend is given by

`$$u_t - \lambda_t$$`

Let's calculate the average of this value for each month of the year. 

This will be our seasonal (monthly) component.




---





count: false
 

.panel1-chunk_3-auto[

``` r
*df
```
]
 
.panel2-chunk_3-auto[

```
# A tibble: 74 × 8
   month unemp_month date       adj                unemp  year trend unemp_shock
   &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
 1     1     -0.0222 2014-01-01 No seasonal adjus…   6.8  2014  6.81      0.0111
 2     1     -0.0222 2015-01-01 No seasonal adjus…   5.5  2015  5.61     -0.0889
 3     1     -0.0222 2016-01-01 No seasonal adjus…   5    2016  5         0.0222
 4     1     -0.0222 2017-01-01 No seasonal adjus…   4.6  2017  4.59      0.0333
 5     1     -0.0222 2018-01-01 No seasonal adjus…   4.1  2018  4.17     -0.0444
 6     1     -0.0222 2019-01-01 No seasonal adjus…   3.9  2019  3.88      0.0444
 7     1     -0.0222 2020-01-01 No seasonal adjus…   3.9  2020  3.9       0.0222
 8     2      0.0507 2014-02-01 No seasonal adjus…   6.7  2014  6.67     -0.0174
 9     2      0.0507 2015-02-01 No seasonal adjus…   5.5  2015  5.54     -0.0952
10     2      0.0507 2016-02-01 No seasonal adjus…   5.1  2016  4.96      0.0937
# ℹ 64 more rows
```
]

---
count: false
 

.panel1-chunk_3-auto[

``` r
df %&gt;%
* mutate(month = month(date), year = year(date))
```
]
 
.panel2-chunk_3-auto[

```
# A tibble: 74 × 8
   month unemp_month date       adj                unemp  year trend unemp_shock
   &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
 1     1     -0.0222 2014-01-01 No seasonal adjus…   6.8  2014  6.81      0.0111
 2     1     -0.0222 2015-01-01 No seasonal adjus…   5.5  2015  5.61     -0.0889
 3     1     -0.0222 2016-01-01 No seasonal adjus…   5    2016  5         0.0222
 4     1     -0.0222 2017-01-01 No seasonal adjus…   4.6  2017  4.59      0.0333
 5     1     -0.0222 2018-01-01 No seasonal adjus…   4.1  2018  4.17     -0.0444
 6     1     -0.0222 2019-01-01 No seasonal adjus…   3.9  2019  3.88      0.0444
 7     1     -0.0222 2020-01-01 No seasonal adjus…   3.9  2020  3.9       0.0222
 8     2      0.0507 2014-02-01 No seasonal adjus…   6.7  2014  6.67     -0.0174
 9     2      0.0507 2015-02-01 No seasonal adjus…   5.5  2015  5.54     -0.0952
10     2      0.0507 2016-02-01 No seasonal adjus…   5.1  2016  4.96      0.0937
# ℹ 64 more rows
```
]

---
count: false
 

.panel1-chunk_3-auto[

``` r
df %&gt;%
  mutate(month = month(date), year = year(date)) %&gt;%
* group_by(month)
```
]
 
.panel2-chunk_3-auto[

```
# A tibble: 74 × 8
# Groups:   month [12]
   month unemp_month date       adj                unemp  year trend unemp_shock
   &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
 1     1     -0.0222 2014-01-01 No seasonal adjus…   6.8  2014  6.81      0.0111
 2     1     -0.0222 2015-01-01 No seasonal adjus…   5.5  2015  5.61     -0.0889
 3     1     -0.0222 2016-01-01 No seasonal adjus…   5    2016  5         0.0222
 4     1     -0.0222 2017-01-01 No seasonal adjus…   4.6  2017  4.59      0.0333
 5     1     -0.0222 2018-01-01 No seasonal adjus…   4.1  2018  4.17     -0.0444
 6     1     -0.0222 2019-01-01 No seasonal adjus…   3.9  2019  3.88      0.0444
 7     1     -0.0222 2020-01-01 No seasonal adjus…   3.9  2020  3.9       0.0222
 8     2      0.0507 2014-02-01 No seasonal adjus…   6.7  2014  6.67     -0.0174
 9     2      0.0507 2015-02-01 No seasonal adjus…   5.5  2015  5.54     -0.0952
10     2      0.0507 2016-02-01 No seasonal adjus…   5.1  2016  4.96      0.0937
# ℹ 64 more rows
```
]

---
count: false
 

.panel1-chunk_3-auto[

``` r
df %&gt;%
  mutate(month = month(date), year = year(date)) %&gt;%
  group_by(month) %&gt;%
* summarise(unemp_month = mean(unemp - trend, na.rm = T))
```
]
 
.panel2-chunk_3-auto[

```
# A tibble: 12 × 2
   month unemp_month
   &lt;dbl&gt;       &lt;dbl&gt;
 1     1     -0.0222
 2     2      0.0444
 3     3     -0.0778
 4     4     -0.180 
 5     5     -0.0833
 6     6      0.0333
 7     7      0.156 
 8     8      0.163 
 9     9      0.154 
10    10     -0.0167
11    11     -0.163 
12    12     -0.111 
```
]

---
count: false
 

.panel1-chunk_3-auto[

``` r
df %&gt;%
  mutate(month = month(date), year = year(date)) %&gt;%
  group_by(month) %&gt;%
  summarise(unemp_month = mean(unemp - trend, na.rm = T)) %&gt;%
* full_join(df, by = 'month')
```
]
 
.panel2-chunk_3-auto[

```
# A tibble: 74 × 9
   month unemp_month.x unemp_month.y date       adj            unemp  year trend
   &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1       -0.0222       -0.0222 2014-01-01 No seasonal a…   6.8  2014  6.81
 2     1       -0.0222       -0.0222 2015-01-01 No seasonal a…   5.5  2015  5.61
 3     1       -0.0222       -0.0222 2016-01-01 No seasonal a…   5    2016  5   
 4     1       -0.0222       -0.0222 2017-01-01 No seasonal a…   4.6  2017  4.59
 5     1       -0.0222       -0.0222 2018-01-01 No seasonal a…   4.1  2018  4.17
 6     1       -0.0222       -0.0222 2019-01-01 No seasonal a…   3.9  2019  3.88
 7     1       -0.0222       -0.0222 2020-01-01 No seasonal a…   3.9  2020  3.9 
 8     2        0.0444        0.0507 2014-02-01 No seasonal a…   6.7  2014  6.67
 9     2        0.0444        0.0507 2015-02-01 No seasonal a…   5.5  2015  5.54
10     2        0.0444        0.0507 2016-02-01 No seasonal a…   5.1  2016  4.96
# ℹ 64 more rows
# ℹ 1 more variable: unemp_shock &lt;dbl&gt;
```
]

---
count: false
 

.panel1-chunk_3-auto[

``` r
df %&gt;%
  mutate(month = month(date), year = year(date)) %&gt;%
  group_by(month) %&gt;%
  summarise(unemp_month = mean(unemp - trend, na.rm = T)) %&gt;%
  full_join(df, by = 'month')
```
]
 
.panel2-chunk_3-auto[

```
# A tibble: 74 × 9
   month unemp_month.x unemp_month.y date       adj            unemp  year trend
   &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1       -0.0222       -0.0222 2014-01-01 No seasonal a…   6.8  2014  6.81
 2     1       -0.0222       -0.0222 2015-01-01 No seasonal a…   5.5  2015  5.61
 3     1       -0.0222       -0.0222 2016-01-01 No seasonal a…   5    2016  5   
 4     1       -0.0222       -0.0222 2017-01-01 No seasonal a…   4.6  2017  4.59
 5     1       -0.0222       -0.0222 2018-01-01 No seasonal a…   4.1  2018  4.17
 6     1       -0.0222       -0.0222 2019-01-01 No seasonal a…   3.9  2019  3.88
 7     1       -0.0222       -0.0222 2020-01-01 No seasonal a…   3.9  2020  3.9 
 8     2        0.0444        0.0507 2014-02-01 No seasonal a…   6.7  2014  6.67
 9     2        0.0444        0.0507 2015-02-01 No seasonal a…   5.5  2015  5.54
10     2        0.0444        0.0507 2016-02-01 No seasonal a…   5.1  2016  4.96
# ℹ 64 more rows
# ℹ 1 more variable: unemp_shock &lt;dbl&gt;
```
]

&lt;style&gt;
.panel1-chunk_3-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_3-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_3-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---



count: false
 

.panel1-chunk_4-auto[

``` r
*ggplot(data = df, aes(x = date, y = unemp_month))
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_01_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_4-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_month))+
* geom_line(stat='identity')
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_02_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_4-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_month))+
  geom_line(stat='identity')+
* theme(plot.title = element_text(size=12),
*       plot.subtitle = element_text(size=9),
*       legend.title = element_blank(),
*       legend.position="bottom",
*       plot.caption = element_text(size=6, hjust = 0),
*       axis.title = element_text(size = 11),
*       strip.background = element_blank(),
*       strip.placement = "outside",
*       panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
*       panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
*       legend.key = element_rect(fill = NA),
*       axis.text.x=element_text(angle=45, hjust=1),
*       panel.background = element_rect(fill = "transparent", colour = NA),
*       plot.background = element_rect(fill = "transparent", colour = NA))
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_03_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_4-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_month))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
* scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_04_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_4-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_month))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
  scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")+
* xlab("")
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_05_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_4-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_month))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
  scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")+
  xlab("") +
* ylab("Unemployment rate (%)")
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_06_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_4-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_month))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
  scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")+
  xlab("") +
  ylab("Unemployment rate (%)") +
* labs(title = "Seasonal component",
*      caption = "")
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_07_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_4-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_month))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
  scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")+
  xlab("") +
  ylab("Unemployment rate (%)") +
  labs(title = "Seasonal component",
       caption = "")
```
]
 
.panel2-chunk_4-auto[
&lt;img src="lecture_7_files/figure-html/chunk_4_auto_08_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.panel1-chunk_4-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_4-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_4-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---




&lt;img src="lecture_7_files/figure-html/unnamed-chunk-28-1.png" width="1008" style="display: block; margin: auto;" /&gt;



---







## Finding the shock component

Finally, the shock is just what is not explained by the seasonal variation or the trend, 

`$$\varepsilon_t = u_t - \lambda_t - s_t$$`

This can be thought of as "surprises", something we did not expect by looking at the trend or the month of the year.

- E.g. some positive or negative event (covid, terms of trade shock, etc.)&lt;br&gt;&lt;br&gt;

This component can tell us if the labor market is doing better than what is explained by seasonal variation or just a trend.


---


count: false
 

.panel1-chunk_5-auto[

``` r
*df
```
]
 
.panel2-chunk_5-auto[

```
# A tibble: 74 × 8
   month unemp_month date       adj                unemp  year trend unemp_shock
   &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
 1     1     -0.0222 2014-01-01 No seasonal adjus…   6.8  2014  6.81      0.0111
 2     1     -0.0222 2015-01-01 No seasonal adjus…   5.5  2015  5.61     -0.0889
 3     1     -0.0222 2016-01-01 No seasonal adjus…   5    2016  5         0.0222
 4     1     -0.0222 2017-01-01 No seasonal adjus…   4.6  2017  4.59      0.0333
 5     1     -0.0222 2018-01-01 No seasonal adjus…   4.1  2018  4.17     -0.0444
 6     1     -0.0222 2019-01-01 No seasonal adjus…   3.9  2019  3.88      0.0444
 7     1     -0.0222 2020-01-01 No seasonal adjus…   3.9  2020  3.9       0.0222
 8     2      0.0507 2014-02-01 No seasonal adjus…   6.7  2014  6.67     -0.0174
 9     2      0.0507 2015-02-01 No seasonal adjus…   5.5  2015  5.54     -0.0952
10     2      0.0507 2016-02-01 No seasonal adjus…   5.1  2016  4.96      0.0937
# ℹ 64 more rows
```
]

---
count: false
 

.panel1-chunk_5-auto[

``` r
df %&gt;%
* mutate(unemp_shock = unemp - (trend + unemp_month))
```
]
 
.panel2-chunk_5-auto[

```
# A tibble: 74 × 8
   month unemp_month date       adj                unemp  year trend unemp_shock
   &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;
 1     1     -0.0222 2014-01-01 No seasonal adjus…   6.8  2014  6.81      0.0111
 2     1     -0.0222 2015-01-01 No seasonal adjus…   5.5  2015  5.61     -0.0889
 3     1     -0.0222 2016-01-01 No seasonal adjus…   5    2016  5         0.0222
 4     1     -0.0222 2017-01-01 No seasonal adjus…   4.6  2017  4.59      0.0333
 5     1     -0.0222 2018-01-01 No seasonal adjus…   4.1  2018  4.17     -0.0444
 6     1     -0.0222 2019-01-01 No seasonal adjus…   3.9  2019  3.88      0.0444
 7     1     -0.0222 2020-01-01 No seasonal adjus…   3.9  2020  3.9       0.0222
 8     2      0.0507 2014-02-01 No seasonal adjus…   6.7  2014  6.67     -0.0174
 9     2      0.0507 2015-02-01 No seasonal adjus…   5.5  2015  5.54     -0.0952
10     2      0.0507 2016-02-01 No seasonal adjus…   5.1  2016  4.96      0.0937
# ℹ 64 more rows
```
]

&lt;style&gt;
.panel1-chunk_5-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_5-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_5-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---
count: false
 

.panel1-chunk_6-auto[

``` r
*ggplot(data = df, aes(x = date, y = unemp_shock))
```
]
 
.panel2-chunk_6-auto[
&lt;img src="lecture_7_files/figure-html/chunk_6_auto_01_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_6-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_shock))+
* geom_line(stat='identity')
```
]
 
.panel2-chunk_6-auto[
&lt;img src="lecture_7_files/figure-html/chunk_6_auto_02_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_6-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_shock))+
  geom_line(stat='identity')+
* theme(plot.title = element_text(size=12),
*       plot.subtitle = element_text(size=9),
*       legend.title = element_blank(),
*       legend.position="bottom",
*       plot.caption = element_text(size=6, hjust = 0),
*       axis.title = element_text(size = 11),
*       strip.background = element_blank(),
*       strip.placement = "outside",
*       panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
*       panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
*       legend.key = element_rect(fill = NA),
*       axis.text.x=element_text(angle=45, hjust=1),
*       panel.background = element_rect(fill = "transparent", colour = NA),
*       plot.background = element_rect(fill = "transparent", colour = NA))
```
]
 
.panel2-chunk_6-auto[
&lt;img src="lecture_7_files/figure-html/chunk_6_auto_03_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_6-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_shock))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
* scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")
```
]
 
.panel2-chunk_6-auto[
&lt;img src="lecture_7_files/figure-html/chunk_6_auto_04_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_6-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_shock))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
  scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")+
* xlab("")
```
]
 
.panel2-chunk_6-auto[
&lt;img src="lecture_7_files/figure-html/chunk_6_auto_05_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_6-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_shock))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
  scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")+
  xlab("") +
* ylab("Unemployment rate (%)")
```
]
 
.panel2-chunk_6-auto[
&lt;img src="lecture_7_files/figure-html/chunk_6_auto_06_output-1.png" width="432" /&gt;
]

---
count: false
 

.panel1-chunk_6-auto[

``` r
ggplot(data = df, aes(x = date, y = unemp_shock))+
  geom_line(stat='identity')+
  theme(plot.title = element_text(size=12),
        plot.subtitle = element_text(size=9),
        legend.title = element_blank(),
        legend.position="bottom",
        plot.caption = element_text(size=6, hjust = 0),
        axis.title = element_text(size = 11),
        strip.background = element_blank(),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        legend.key = element_rect(fill = NA),
        axis.text.x=element_text(angle=45, hjust=1),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background = element_rect(fill = "transparent", colour = NA))+
  scale_x_date(date_breaks = "12 month", date_labels = "%m-%Y")+
  xlab("") +
  ylab("Unemployment rate (%)") +
* labs(title = "Shock component",
*      caption = "Source: OECD, Short-term Unemployment Statistics")
```
]
 
.panel2-chunk_6-auto[
&lt;img src="lecture_7_files/figure-html/chunk_6_auto_07_output-1.png" width="432" /&gt;
]

&lt;style&gt;
.panel1-chunk_6-auto {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-chunk_6-auto {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-chunk_6-auto {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






---



&lt;img src="lecture_7_files/figure-html/unnamed-chunk-30-1.png" width="1008" style="display: block; margin: auto;" /&gt;


---

&lt;img src="lecture_7_files/figure-html/unnamed-chunk-31-1.png" width="1008" style="display: block; margin: auto;" /&gt;

Data available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/blob/648d134ccdd3c867b21dc2d60d56eeda0bc416fb/data/STLABOUR_10112023115611842.csv" target="_blank"&gt;here&lt;/a&gt;.




&lt;!-- then show how to do that with the series for the uk, that way we get the trend  --&gt;

&lt;!-- then we remove the seasonality, just average by quarter and remove it  --&gt;


---



## Seasonal adjustments: summary

**Goal**: To remove seasonal component.

**Approach**:

- Estimate trend level.

- Remove trend from raw series.

- What is left is a seasonal component + error.

- Use that to identify the seasonal component.

- Subtract the seasonal component from the raw series.&lt;br&gt;&lt;br&gt;

There is a large literature in econometrics and statistics on filtering time series!

- A lot of it is a version of what you have seen here. 





&lt;!-- --- --&gt;

&lt;!-- ## The labour market: other topics --&gt;

&lt;!-- Labour supply --&gt;

&lt;!-- - Extensive margin vs intensive margin --&gt;

&lt;!-- - Hours worked --&gt;

&lt;!-- Earnings --&gt;

&lt;!-- - Wages, Salary, survey based, register based --&gt;

&lt;!-- Gender disparities --&gt;

&lt;!-- - Earnings &amp; promotions --&gt;




---

## Summary

&lt;br&gt;&lt;br&gt;

1. Explain how labour market statistics are calculated.

2. Explain the difference between register and survey data.

3. Explain the intuition behind seasonal adjustment. 

&lt;br&gt;&lt;br&gt;

Data for all charts available &lt;a href="https://github.com/sebastianellingsen/economic_data_course/tree/main/data" target="_blank"&gt;here&lt;/a&gt;.


&lt;!-- LINKS TO DATA HERE (TO GO WITH THE SCRIPTS) --&gt;






---

class: inverse, center, middle

# See you in the labs! 

Questions? `\(\texttt{sebastian.ellingsen@bristol.ac.uk}\)`.







    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"navigation": {
"scroll": true
}
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
