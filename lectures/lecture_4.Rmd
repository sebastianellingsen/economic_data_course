---
title: "Economic Data - Lecture 4"
subtitle: "Sebastian Ellingsen"
author: "School of Economics - University of Bristol"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: '16:9'
      navigation:
        scroll: true # false if wish to disable scrolling by mouth and use keyboard only

---

```{r xaringan-themer, include=FALSE, warning=FALSE}
options(htmltools.dir.version = FALSE)

library(xaringanthemer)
style_mono_accent(
  base_color = "#1c5253")

options(htmltools.dir.version = FALSE)

# This is a recommended set up for flipbooks
knitr::opts_chunk$set(fig.width = 6, small.mar=TRUE, fig.retina = 5,message = FALSE, warning = FALSE, comment = "", cache = F)
library(flipbookr)
library(tidyverse)
library(readxl)
library(scales)
library(ggthemes)
```


```{css, eval = TRUE, echo = FALSE}
.remark-code{line-height: 1.5; font-size: 80%}

@media print {
  .has-continuation {
    display: block;
  }
}

code.r.hljs.remark-code{
  position: relative;
  overflow-x: hidden;
}


code.r.hljs.remark-code:hover{
  overflow-x:visible;
  width: 500px;
  border-style: solid;
}

.centered-content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 60vh; /* Adjust based on your needs */
  text-align: center;
  margin-top: auto;
  margin-bottom: auto;
}

```


<div class="centered-content">
  <h2> </h2>
   <p>  Measuring well-being <p> 

  <p>  Measuring economic actvity<p> 

   <p> Approaches to measuring GDP <p>

  <p> Applications of GDP <p>

</div>





---

class: inverse, center, middle

# Measuring Well-being



---

## What is wellbeing?

The utility of an individual can be thought of as the indirect utility function:
\begin{equation}
u_i\left(p, w \right),
\end{equation}
where $p$ denotes market prices and $w$ endowments.<br><br>

For a society of $n$ individuals, aggregate well-being can be formulated as
\begin{equation}
W = F(u_1, ..., u_n).
\end{equation}

- No agreement on appropriate term of $u_i$.

- No agreement on the measurement of these concepts.

- No agreement on how to aggregate utility function $F(\cdot)$.


---

## What is wellbeing?

Even if we agree on an appropriate term of $u_i$, how do we aggregate them?

- Utilitarian: $W = \sum_{i=1}^n u_i$.

- Rawls: utility of the worst off $W = \text{min}\{ u_1, ..., u_n\}$.

- Average utility: $W = \sum_{i=1}^n \frac{1}{n}u_i$.<br><br>

Well-being linked to availability of resources in numerous ways (GDP as welfare measure often motivated in this way). 


---



## GDP per capita is not a measure of well-being

It is a measure of certain types of economic activity. 

Ignores non-market activity that could be important. 

- Natural amenities, education, health, crime, cultural activities, safety.

GDP is correlated with a lot of *good stuff*.

- E.g. higher GDP associated with lower infant mortality rates


---



## 


```{r, fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE,fig.align="center", include=FALSE}

library(readr)
library(tidyverse)
library(ggrepel)

df <- read_csv('../data/life-expectancy-vs-gdp-per-capita.csv') %>% 
  rename(year      = Year,
         country   = Entity,
         code      = Code,
         gdppc     = `GDP per capita`,
         life_exp  = `Life expectancy at birth (historical)`,
         pop       = `Population (historical estimates)`,
         continent = Continent) %>% 
  select(country, continent, year, gdppc, life_exp, pop) %>%
  filter(year == 2015,
         !is.na(pop),
         !is.na(gdppc))

p1 <- ggplot(data = df, aes(x = log(gdppc), y = life_exp, color = continent))+
  geom_point(aes(size = pop), alpha = 0.6, stroke = 0.4)+
  scale_size_continuous(range = c(0.5, 12), breaks = c(6e+8, 1.3e+9), labels = c('600M', '1.3B'))+
  theme(plot.title = element_text(size=22),
        plot.subtitle = element_text(size=16),
        legend.title = element_blank(),
        legend.text=element_text(size=14),
        legend.position="right",
        plot.caption = element_text(size=12, hjust = 0),
        axis.title = element_text(size = 18),
        strip.background = element_blank(),
        axis.text.x=element_text(angle=45, hjust=1, size = 12),
        axis.text.y=element_text(size = 12),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background  = element_rect(fill = "transparent", colour = NA),
        legend.background = element_rect(fill='transparent'),
        legend.key=element_blank())+
  xlab("GDP per capita (log)") +
  ylab("Life expectancy at birth") +
  labs(title = "Life expectancy vs. GDP per capita, 2015",
       size = 'Population:',
       color = ' ',
       subtitle = "GDP per capita is adjusted for inflation and differences in the cost of living between countries.",
       caption = "Source: UN WPP (2022); Zijdeman et al. (2015); Riley (2005); Maddison Project Database 2020 (Bolt and van Zanden, 2020).\nNote: GDP per capita is expressed in international-dollars at 2011 prices.")+
  scale_x_continuous(n.breaks=8) +
  scale_y_continuous(n.breaks=8) +
  geom_text_repel(aes(label=ifelse(country %in% c('China', 'Democratic Republic of Congo', 'South Africa', 'Indonesia', 'Equatorial Guinea', 'Trinidad and Tobago', 'Italy', 'Poland', 'Brazil', 'Italy', 'Poland', 'Angola', 'Nigeria', 'United States', 'North Korea', 'Ethiopia', 'Chad', 'India', 'Pakistan'), country, '')),
                  size = 3.5,
                  show.legend  = FALSE) +
  guides(size = guide_legend(override.aes=list(shape = 1)),
         color = guide_legend(override.aes=list(shape = 15)))
  

```

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE, fig.height = 8, fig.width = 11, fig.align="center"}
p1
```




---

## GDP does not measure income distribution

Who gets the growth?

- Uneven benefits of growth.

- Skill-biased technological change.

- What is our welfare function?

- Utilitarian: $W = \sum_{i=1}^n u_i$.

- Rawls: utility of the worst off $W = \text{min}\{ u_1, ..., u_n\}$.

- Average utility: $W = \sum_{i=1}^n \frac{1}{n}u_i$.





---

## 

<div style="text-align: center; margin-top: 50px;">
  <img src="images/inequality.png" alt="A descriptive alt text" style="width: 800px;">
</div>





---

## Subjective Well-being Measures

*Ask people how they consider their situation.*

- ”Overall, how satisfied are you with your life nowadays?” (life satisfaction)

- ”Overall, how happy did you feel yesterday?” (happiness)<br><br>

*Ask people how they feel*

- ”Sad to Happy”, ”Angry to Friendly”, ”Hard to concentrate”

- Asked at specific (or random) points.<br><br>

**Challenge**: We don’t all use the same scale.

**Solution**: Anchoring vignettes/self-anchoring






---

```{r, fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE,fig.align="center", include=FALSE}
## Loading libraries
library(tidyverse)
library(readr)


## Loading and cleaning the data on life satisfaction  
life_sat <- read_csv("../data/ilc_pw01__custom_7985898_linear.csv") %>% 
  select(geo, TIME_PERIOD, OBS_VALUE) %>% 
  rename(country  = geo,
         year     = TIME_PERIOD, 
         life_sat = OBS_VALUE)

## Loading and cleaning the data on GDP per capita   
gdppc <- read_csv("../data/sdg_08_10__custom_7985512_linear.csv") %>% 
  select(geo, TIME_PERIOD, OBS_VALUE) %>% 
  rename(country = geo,
         year    = TIME_PERIOD, 
         gdppc   = OBS_VALUE)

## Combining the datasets 
df <- life_sat %>% 
  full_join(gdppc, by = c('country', 'year')) %>% 
  filter(!is.na(life_sat), 
         !is.na(gdppc), 
         country!='EU27_2020') 

## Plotting the data 
p1 <- ggplot(data=df, aes(x = gdppc, y = life_sat, color = as.factor(year)))+
  geom_point(size = 2.5, alpha = 0.7)+
  # scale_color_manual(values=c(0,3,1))+
  theme(plot.title = element_text(size=22),
        plot.subtitle = element_text(size=16),
        legend.title = element_blank(),
        legend.text=element_text(size=14),
        legend.position="right",
        plot.caption = element_text(size=12, hjust = 0),
        axis.title = element_text(size = 18),
        strip.background = element_blank(),
        axis.text.x=element_text(angle=45, hjust=1, size = 12),
        axis.text.y=element_text(size = 12),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background  = element_rect(fill = "transparent", colour = NA),
        legend.background = element_rect(fill='transparent'),
        legend.key=element_blank())+
  xlab("Real GDP per capita") +
  ylab("Overall life satisfaction (1=lowest, 10=highest)") +
  labs(title = "Life satisfaction vs. GDP per capita",
       size = 'Population:',
       color = ' ',
       subtitle = "Real GDP per capita is measured in 2015 prices",
       caption = "Real GDP per capita 2015 national currency (chain linked). Source: Eurostat (nama_10_gdp).")

```

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE, fig.height = 8, fig.width = 11, fig.align="center"}
p1
```



---



## Objective Well-being Measures

Use proxies for well-being:

- Natural amenities: Size of a forest area

- Environment: Air and water Pollution

- Crime and safety: Crime rates

- Education: Completed education

- Health: Life expectancy

**Challenges**: List of proxies is based on value judgement.<br><br>




---



## The Human Development Index


A widely publicized variable is the Human Development Index (HDI).

The index is constructed as the *geometric* mean of measures of income, education, and health.<br><br>

For each variable $k$ they construct an index $I_{it}^k$ (bounded by $0$ and $1$) as

\begin{equation}
I_{it}^k = \frac{\text{Actual value} - \text{Min. value}}{\text{Max. value} - \text{Min. value}}
\end{equation}
<br><br>
The three variables are defined as follows in the baseline case:

- $I_{it}^{Health}$ denotes the life expectancy at birth.

- $I_{it}^{Education}$ denotes mean years of schooling.

- $I_{it}^{Income}$ denotes GNI per capita (2017 PPP$).






---

## The Human Development Index

The HDI-index for country $i$ in year $t$ is given by<br><br>
\begin{equation}
HDI_{it} = \left(I_{it}^{Health}I_{it}^{Education}I_{it}^{Income}\right)^{\frac{1}{3}}
\end{equation}
<br><br>

The geometric mean is chosen to make the function concave in $I_{it}^{Health}I_{it}^{Education}I_{it}^{Income}$.

- The idea is that increases matter less the larger the product of the indices are. 









---

## 

```{r, fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE,fig.align="center", include=FALSE}
# Loading and cleaning data 


df <- read_excel("../data/hdr-data.xlsx") %>% 
    mutate(uk = ifelse(country == 'United', 1, 0) %>% as.factor()) 


## Plotting the data 
p1 <- ggplot(data = df, aes(x = as.numeric(year), y = value, color = country)) +
  geom_line(aes(alpha = uk), size = 0.8) + 
  scale_color_manual(values = rep("black", length(unique(df$country)))) + # Set gray for all countries
  scale_alpha_manual(values = c(0.05, 1)) +  # 0.1 for all, 1 for the highlighted country
  theme(plot.title = element_text(size=22),
        plot.subtitle = element_text(size=16),
        legend.title = element_blank(),
        legend.text=element_text(size=14),
        legend.position="none",
        plot.caption = element_text(size=12, hjust = 0),
        axis.title = element_text(size = 18),
        strip.background = element_blank(),
        axis.text.x=element_text(angle=45, hjust=1, size = 12),
        axis.text.y=element_text(size = 12),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background  = element_rect(fill = "transparent", colour = NA),
        legend.background = element_rect(fill='transparent'),
        legend.key=element_blank())+
  xlab("Year") +
  ylab("Our development index (ODI)") +
  labs(
    title = "The Human Development Index, 1990-2020",
    subtitle = "Index created from life expectancy at birth, GNI per capita (2017 PPP$), and mean years of schooling.",
    caption = "Source: Human Development Reports. https://hdr.undp.org/data-center/documentation-and-downloads.")

```

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE, fig.height = 8, fig.width = 11, fig.align="center"}
p1
```



---

## 

```{r, fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE,fig.align="center", include=FALSE}
# Loading and cleaning data 


df <- read_excel("../data/hdr-data.xlsx") %>% 
    mutate(uk = ifelse(country == 'United Kingdom', 1, 0) %>% as.factor()) 


## Plotting the data 
p1 <- ggplot(data = df, aes(x = as.numeric(year), y = value, color = country)) +
  geom_line(aes(alpha = uk), size = 0.8) + 
  scale_color_manual(values = rep("black", length(unique(df$country)))) + # Set gray for all countries
  scale_alpha_manual(values = c(0.05, 1)) +  # 0.1 for all, 1 for the highlighted country
  theme(plot.title = element_text(size=22),
        plot.subtitle = element_text(size=16),
        legend.title = element_blank(),
        legend.text=element_text(size=14),
        legend.position="none",
        plot.caption = element_text(size=12, hjust = 0),
        axis.title = element_text(size = 18),
        strip.background = element_blank(),
        axis.text.x=element_text(angle=45, hjust=1, size = 12),
        axis.text.y=element_text(size = 12),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background  = element_rect(fill = "transparent", colour = NA),
        legend.background = element_rect(fill='transparent'),
        legend.key=element_blank())+
  xlab("Year") +
  ylab("Our development index (ODI)") +
  labs(
    title = "The Human Development Index, 1990-2020",
    subtitle = "Index created from life expectancy at birth, GNI per capita (2017 PPP$), and mean years of schooling.",
    caption = "Source: Human Development Reports. https://hdr.undp.org/data-center/documentation-and-downloads.")

```

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE, fig.height = 8, fig.width = 11, fig.align="center"}
p1
```





---

## General Approach 


Write the function, generate your own in one of the labs  




---

## Descriptive Statistics 

<!-- As we start to combine and describe patterns in data, we need some measures to summarize data.  -->

The data we consider will have a *distribution*, frequency with which different values occur. <br><br>



```{r, fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE,fig.align="center", include=FALSE}

library(readr)
library(tidyverse)
library(ggrepel)

df <- read_csv('../data/life-expectancy-vs-gdp-per-capita.csv') %>% 
  rename(year      = Year,
         country   = Entity,
         code      = Code,
         gdppc     = `GDP per capita`,
         life_exp  = `Life expectancy at birth (historical)`,
         pop       = `Population (historical estimates)`,
         continent = Continent) %>% 
  select(country, continent, year, gdppc, life_exp, pop) %>%
  filter(year == 2015,
         !is.na(pop),
         !is.na(gdppc))

p1 <- ggplot(data = df, aes(x = life_exp))+
  geom_histogram(binwidth = 2, fill = "grey", alpha = 0.7,color = "black") +
  theme(plot.title = element_text(size=22),
        plot.subtitle = element_text(size=16),
        legend.title = element_blank(),
        legend.text=element_text(size=14),
        legend.position="none",
        plot.caption = element_text(size=12, hjust = 0),
        axis.title = element_text(size = 18),
        strip.background = element_blank(),
        axis.text.x=element_text(angle=45, hjust=1, size = 12),
        axis.text.y=element_text(size = 12),
        strip.placement = "outside",
        panel.grid.minor = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.grid.major = element_line('grey', size = 0.1, linetype = 'dashed'),
        panel.background = element_rect(fill = "transparent", colour = NA),
        plot.background  = element_rect(fill = "transparent", colour = NA),
        legend.background = element_rect(fill='transparent'),
        legend.key=element_blank())+
  xlab("Life expectancy at birth") +
  ylab("Count") +
  labs(title = "Life expectancy at birth, 2015",
       subtitle = "",
       caption = "Source: UN WPP (2022).")+
  scale_x_continuous(n.breaks=8) 
  

```

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=FALSE, message=FALSE, warning=FALSE, fig_caption= FALSE, fig.height = 4.8, fig.width = 11, fig.align="center"}
p1
```


---

## Descriptive Statistics 

Imagine we have a variable $X_i$ with observations $i=1, ..., N$.

Measuring the central tendency: 

- Mean: $\bar{X} = \frac{1}{N}\sum_{i=1}X_i$ 

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=T, message=FALSE, warning=FALSE, fig_caption= FALSE, eval = T, fig.height = 3.7, fig.width = 7.1, fig.align="center"}
mean(df$life_exp)
```

- Median: half the observations have a larger value, half a smaller value.

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=T, message=FALSE, warning=FALSE, fig_caption= FALSE, eval = T, fig.height = 3.7, fig.width = 7.1, fig.align="center"}
median(df$life_exp)
```


---

## Descriptive Statistics 

Measuring the dispersion: 

- Variance: $\sigma_X^2 = \frac{\sum_{i=1}^N\left(X_i - \bar{X}\right)^2}{N}$ 

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=T, message=FALSE, warning=FALSE, fig_caption= FALSE, eval = T, fig.height = 3.7, fig.width = 7.1, fig.align="center"}
var(df$life_exp)
```


- Standard deviation: $\sigma_X = \sqrt{\sigma_X^2}$. 

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=T, message=FALSE, warning=FALSE, fig_caption= FALSE, eval = T, fig.height = 3.7, fig.width = 7.1, fig.align="center"}
sd(df$life_exp)
var(df$life_exp)^0.5
```


---

## Descriptive Statistics 

SO USEFULL THAT BUILD IN

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=T, message=FALSE, warning=FALSE, fig_caption= FALSE, eval = T, fig.height = 3.7, fig.width = 7.1, fig.align="center"}
summary(df$life_exp)
```



---

## Descriptive Statistics 

or for entire dataframe

```{r dev.args = list(bg = 'transparent'), fig.align="center", echo=T, message=FALSE, warning=FALSE, fig_caption= FALSE, eval = T, fig.height = 3.7, fig.width = 7.1, fig.align="center"}
summary(df)
```

---


## Descriptive Statistics 

Want to measure the *co-dispersion* between two variables as well. 

<!-- mean, median, dispersion, correlation  -->

<!-- how to calculate them in R.  -->

<!-- want to summarise patterns in data with a simple number  -->

<!-- USE presentation in THE BOOK, show how in R -->


---

## Summary

GDP is the most publicized economic data. 

- GDP measures economic activity in terms of expenditures, production or income.

- GDP is based on the national accounts.

- There are international standards for what is included in GDP.

- GDP is used for measuring economic growth, defining business cycles, measuring productivity, measuring wellbeing.<br><br> 

**Coming weeks**: How to measure welfare? Adjusting for prices (spatially and temporally): Real or nominal GDP?






---

class: inverse, center, middle

# See you in the labs! 

Questions? $\texttt{sebastian.ellingsen@bristol.ac.uk}$.







